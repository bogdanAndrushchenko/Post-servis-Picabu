(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,t,s){},QfWi:function(e,t,s){"use strict";s.r(t);s("RtS0"),s("lmye"),s("3dw1"),s("L1EO");var n={loginElem:document.querySelector(".login"),loginForm:document.querySelector(".login-form"),emailInput:document.querySelector(".login-email"),passwordInput:document.querySelector(".login-password"),loginSingUplink:document.querySelector(".login-singup"),userElem:document.querySelector(".user"),userName:document.querySelector(".user-name"),exitElem:document.querySelector(".exit"),editElem:document.querySelector(".edit"),editConteiner:document.querySelector(".edit-conteiner"),editUserName:document.querySelector(".edit-username"),editFotoURL:document.querySelector(".edit-photo"),userAvatar:document.querySelector(".user-avatar"),postsWrapper:document.querySelector(".posts"),btnNewPost:document.querySelector(".button-new-post"),addPostElem:document.querySelector(".add-post"),loginForget:document.querySelector(".login-forget")},a=(s("Muwe"),s("aZFp"),s("SgDD"),s("Khg5")),o=s.n(a),i=(s("zcCd"),s("1qDt"),/^\w+@\w+\.\w{2,}$/),l={user:null,initUser:function(e){var t=this;o.a.auth().onAuthStateChanged((function(s){t.user=s||null,e&&e()}))},logIn:function(e,t){i.test(e)?o.a.auth().signInWithEmailAndPassword(e,t).catch((function(e){var t=e.code,s=e.message;"auth/wrong-password"===t?(console.log(s),alert("error message")):"auth/user-not-found"===t?alert("catch email"):alert(s)})):alert("error email")},logOut:function(){o.a.auth().signOut()},signUp:function(e,t,s){var n=this;i.test(e)?e.trim()&&t.trim()?o.a.auth().createUserWithEmailAndPassword(e,t).then((function(){n.editUser(e.split("@")[0],null,s)})).catch((function(e){var t=e.code,s=e.message;"auth/week-password"===t?(console.log(s),alert("error message")):"auth/email-already-in-use"===t?alert("catch email"):alert(s)})):alert("Give your email&password"):alert("error email")},editUser:function(e,t,s){var n=o.a.auth().currentUser;e&&(t?n.updateProfile({displayName:e,photoURL:t}).then(s):n.updateProfile({displayName:e}).then(s))},sendForget:function(e){o.a.auth().sendPasswordResetEmail(e).then((function(){alert("email sent")})).catch((function(e){return console.log(e)}))}};s("JBxO"),s("9UJh");o.a.initializeApp({apiKey:"AIzaSyBJ6Mgn46XbiUS1h3XaF6hCPvcoq5ABBwM",authDomain:"picadu-ff81c.firebaseapp.com",databaseURL:"https://picadu-ff81c.firebaseio.com",projectId:"picadu-ff81c",storageBucket:"picadu-ff81c.appspot.com",messagingSenderId:"177410581303",appId:"1:177410581303:web:87d27dae97ab6fed3b70b2"});var r={allPosts:[],addPosts:function(e,t,s,n){var a=this,i=o.a.auth().currentUser;this.allPosts.unshift({id:"postID"+(+new Date).toString(16)+"-"+i.uid,title:e,text:t,tags:s.split(",").map((function(e){return e.trim()})),author:{displayName:l.user.displayName,photo:l.user.photoURL},date:(new Date).toLocaleDateString(),like:0,coment:0}),o.a.database().ref("post").set(this.allPosts).then((function(){return a.getPost(n)}))},getPost:function(e){var t=this;o.a.database().ref("post").on("value",(function(s){t.allPosts=s.val()||[],e()}))}},u=s("kLwN"),c=s.n(u),d=document.querySelector("#menu-toggle"),p=document.querySelector(".sidebar");d.addEventListener("click",(function(e){e.preventDefault(),p.classList.toggle("visible")}));var m=function(){var e=l.user;console.log("user =>",e),e?(n.loginElem.style.display="none",n.userElem.style.display="",n.userName.textContent=e.displayName,n.userAvatar.src=e.photoURL?e.photoURL:c.a,n.btnNewPost.classList.add("visible")):(n.loginElem.style.display="",n.userElem.style.display="none",n.btnNewPost.classList.remove("visible"),n.addPostElem.classList.remove("visible"),n.postsWrapper.classList.add("visible"))},v=function(){n.addPostElem.classList.remove("visible"),n.postsWrapper.classList.add("visible");var e="";r.allPosts.forEach((function(t){e+='\n  <section class="post">\n          <div class="post-body">\n            <h2 class="post-title">'+t.title+'</h2>\n            <p class="post-text">\n              '+t.text+'\n            </p>\n\n            <div class="tags">\n            '+t.tags.map((function(e){return'<a href="#" class="tag"># '+e+"</a>"}))+'\n\n\n            </div>\n            \x3c!-- /.tags --\x3e\n          </div>\n          \x3c!-- /.post-body --\x3e\n          <div class="post-footer">\n            <div class="post-buttons">\n              <button class="post-button likes">\n                <svg width="19" height="20" class="icon icon-like">\n                  <use xlink:href="images/icons.svg#like"></use>\n                </svg>\n                <span class="likes-counter">'+t.like+'</span>\n              </button>\n              <button class="post-button comments">\n                <svg width="21" height="21" class="icon icon-comment">\n                  <use xlink:href="images/icons.svg#comment"></use>\n                </svg>\n                <span class="comments-counter">'+t.coment+'</span>\n              </button>\n              <button class="post-button save">\n                <svg width="19" height="19" class="icon icon-save">\n                  <use xlink:href="images/icons.svg#save"></use>\n                </svg>\n              </button>\n              <button class="post-button share">\n                <svg width="17" height="19" class="icon icon-share">\n                  <use xlink:href="images/icons.svg#share"></use>\n                </svg>\n              </button>\n            </div>\n            \x3c!-- /.post-buttons --\x3e\n            <div class="post-author">\n              <div class="author-about">\n                <a href="#" class="author-username">'+t.author.displayName+'</a>\n                <span class="post-time">'+t.date+'</span>\n              </div>\n              <a href="#" class="author-link"\n                ><img src="'+(t.author.photo||c.a)+'" alt="avatar" class="author-avatar"\n              /></a>\n            </div>\n            \x3c!-- /.post-author --\x3e\n          </div>\n          </section>\n'})),n.postsWrapper.innerHTML=e,n.addPostElem.classList.remove("visible"),n.postsWrapper.classList.add("visible")};n.loginForget.addEventListener("click",(function(e){e.preventDefault(),l.sendForget(n.emailInput.value),n.emailInput.value=""}));document.addEventListener("DOMContentLoaded",(function(){n.loginForm.addEventListener("submit",(function(e){e.preventDefault(),l.logIn(n.emailInput.value,n.passwordInput.value,m),n.loginForm.reset()})),n.loginSingUplink.addEventListener("click",(function(e){e.preventDefault(),l.signUp(n.emailInput.value,n.passwordInput.value,m),n.loginForm.reset()})),n.exitElem.addEventListener("click",(function(e){e.preventDefault(),l.logOut(m)})),n.editElem.addEventListener("click",(function(e){e.preventDefault(),n.editConteiner.classList.toggle("visible"),n.editUserName.value=l.user.displayName})),n.editConteiner.addEventListener("submit",(function(e){e.preventDefault(),l.editUser(n.editUserName.value,n.editFotoURL.value,m),n.editConteiner.classList.remove("visible")})),n.btnNewPost.addEventListener("click",(function(e){e.preventDefault(),n.addPostElem.classList.add("visible"),n.postsWrapper.classList.remove("visible")})),n.addPostElem.addEventListener("submit",(function(e){e.preventDefault();var t=n.addPostElem.elements,s=t.title,a=t.text,o=t.tags;s.value.length<6?alert("short title"):a.value.length<50?alert("short your post"):(r.addPosts(s.value,a.value,o.value,v),n.addPostElem.classList.remove("visible"),n.addPostElem.reset())})),l.initUser(m),r.getPost(v)}))},kLwN:function(e,t){e.exports="data:image/jpeg;base64,ZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyAiMjA2YzQ5MWMwODg1NjE3ZDg3ZDU2Zjk0MGJiZmQ3NWYuanBlZyI7"}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.e055882f0d6e7a39a081.js.map